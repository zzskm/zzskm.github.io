<!DOCTYPE html>
<html lang="ko" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>겨울방학 가족여행 가이드</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{--p:#2563eb;--s:#10b981;--m:#64748b;--bg:#f8fafc;--c:#fff;--t:#0f172a;--b:#e2e8f0;--sh:0 10px 30px rgba(0,0,0,.1)}
    [data-theme=dark]{--bg:#0b1220;--c:#0f172a;--t:#e5e7eb;--b:#1f2a44;--sh:0 10px 30px rgba(0,0,0,.5)}
    *{margin:0;box-sizing:border-box}
    body{font-family:'Noto Sans KR',sans-serif;background:var(--bg);color:var(--t);line-height:1.7;padding:1rem}
    .wrap{max-width:1100px;margin:auto;background:var(--c);border-radius:16px;overflow:hidden;box-shadow:var(--sh)}
    header{background:linear-gradient(135deg,var(--p),#3b82f6);color:#fff;padding:2.5rem 1.5rem 2rem;text-align:center;position:relative}
    h1{font-size:2rem;font-weight:700;margin:0 0 .5rem}
    .toggle{position:absolute;top:1rem;right:1rem;width:40px;height:40px;border-radius:50%;background:rgba(255,255,255,.2);border:none;color:#fff;font-size:1.3rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:.2s}
    .toggle:hover{transform:scale(1.08)}
    .sec{padding:1.5rem}
    h2{font-size:1.4rem;color:var(--p);margin:1.2rem 0 .8rem;display:flex;gap:.5rem;align-items:center;font-weight:600}
    ul{list-style:none;display:grid;gap:.5rem;font-size:.95rem;color:var(--m)}
    table{width:100%;border-collapse:collapse;border:1px solid var(--b);border-radius:12px;overflow:hidden;margin:1rem 0;font-size:.95rem}
    th{background:var(--p);color:#fff;padding:.9rem .7rem;text-align:center;font-weight:600}
    td{padding:.8rem .7rem;text-align:center;border-bottom:1px solid var(--b)}
    tr:hover{background:rgba(37,99,235,.05)}
    .hl{color:var(--s);font-weight:700;font-size:1.1em}
    .chart{margin:1rem 0;background:var(--c);border:1px solid var(--b);border-radius:12px;padding:1.2rem;overflow:hidden}
    #c{overflow:visible}
    footer{text-align:center;padding:1.2rem;color:var(--m);font-size:.8rem;border-top:1px solid var(--b)}
    .tooltip{position:fixed;background:rgba(15,23,42,.95);color:#fff;padding:8px 12px;border-radius:8px;font-size:.85rem;pointer-events:none;opacity:0;box-shadow:0 4px 12px rgba(0,0,0,.3);z-index:1000;white-space:nowrap}
  </style>
</head>
<body>
<div class="wrap">
  <header>
    <button class="toggle" id="t" aria-label="테마 전환">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18z"/></svg>
    </button>
    <h1>겨울방학 가족여행 가이드</h1>
    <p>아시아·남태평양 10대 휴양지 | 3박 5일 | 4인 가족 기준</p>
  </header>

  <div class="sec chart">
    <h2>종합 스코어 비교</h2>
    <div id="c" style="min-height:460px"></div>
  </div>

  <footer>2025 겨울방학 가족여행 비교 가이드 | 3박 5일 4인 가족 기준</footer>
</div>

<script>
  // 테마 토글
  const btn=document.getElementById('t'),root=document.documentElement;
  const sun='<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 7a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm0-5v2m0 14v2m8-8h-2M6 12H4m12.364-5.636l-1.414 1.414M7.05 7.05l-1.414 1.414m12.728 12.728l-1.414-1.414M7.05 16.95l-1.414-1.414"/></svg>';
  const moon='<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>';
  const update=()=>{btn.innerHTML=root.dataset.theme==='dark'?sun:moon;localStorage.setItem('t',root.dataset.theme)};
  btn.onclick=()=>{root.dataset.theme=root.dataset.theme==='dark'?'light':'dark';update()};
  const saved=localStorage.getItem('t'); if(saved) root.dataset.theme=saved; update();

  // D3 차트 (우측 여백 축소 버전)
  const data=[{p:"다낭",s:100},{p:"코타키나발루",s:96},{p:"세부",s:91},{p:"보홀",s:85},{p:"랑카위",s:81},{p:"발리",s:77},{p:"보라카이",s:72},{p:"롬복",s:69},{p:"괌",s:63},{p:"오키나와",s:59}];
  function draw(){
    const c=document.getElementById('c'); c.innerHTML='';
    const w=c.clientWidth||800, baseH=Math.max(460,data.length*48);
    const svg=d3.select(c).append('svg').attr('width','100%').attr('height',baseH).style('overflow','visible');
    let m={t:16,r:16,b:30,l:60}, iw=w-m.l-m.r, ih=baseH-m.t-m.b;
    const x=d3.scaleLinear().domain([0,100]).range([0,iw]), y=d3.scaleBand().domain(data.map(d=>d.p)).range([0,ih]).padding(.2);
    const g=svg.append('g').attr('transform',`translate(${m.l},${m.t})`);
    g.append('g').attr('transform',`translate(0,${ih})`).call(d3.axisBottom(x).tickSize(-ih).tickFormat('')).selectAll('line').attr('stroke','#e5e7eb');
    const bars=g.selectAll('.bar').data(data).enter().append('rect').attr('y',d=>y(d.p)).attr('height',y.bandwidth()).attr('width',0)
      .attr('fill',d=>d.s>=90?'#10b981':d.s>=80?'#3b82f6':'#6b7280').attr('rx',8);
    bars.transition().duration(800).delay((_,i)=>i*80).attr('width',d=>x(d.s));
    g.append('g').call(d3.axisLeft(y)).selectAll('text').style('font-size','14px').style('font-weight',600);
    const labels=g.selectAll('.val').data(data).enter().append('text').attr('y',d=>y(d.p)+y.bandwidth()/2).attr('dy','.35em')
      .text(d=>d.s).attr('x',d=>x(d.s)+8).style('font-weight',700).style('fill','#2563eb').style('opacity',0)
      .transition().delay((_,i)=>i*80+500).duration(400).style('opacity',1);
  }
  draw();
  window.onresize=()=>{clearTimeout(window._rt);window._rt=setTimeout(draw,200)};
</script>
</body>
</html>
