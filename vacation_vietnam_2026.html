<!DOCTYPE html>
<html lang="ko" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ë‹¤ë‚­ vs í‘¸ê¾¸ì˜¥ vs ë‚˜íŠ¸ë‘ ë¹„êµ</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
  :root{--p:#2563eb;--s:#10b981;--m:#64748b;--bg:#f8fafc;--c:#fff;--t:#0f172a;--b:#e2e8f0;--sh:0 10px 30px rgba(0,0,0,.1);--sh-hover:0 20px 40px rgba(0,0,0,.15);--k:#0f172a;--grad-soft:linear-gradient(135deg,#f8fbff,#eff6ff)}
  [data-theme=dark]{--bg:#0b1220;--c:#0f172a;--t:#e5e7eb;--b:#1f2a44;--sh:0 10px 30px rgba(0,0,0,.5);--sh-hover:0 20px 40px rgba(0,0,0,.7);--k:#e2e8f0;--grad-soft:linear-gradient(135deg,#111c33,#0e1524)}
    *{margin:0;box-sizing:border-box}
  body{font-family:'Noto Sans KR',sans-serif;background:var(--bg);color:var(--t);line-height:1.7;padding:1rem;transition:background-color .3s ease,color .3s ease;scroll-behavior:smooth}
  body::before{content:'';position:fixed;inset:0;background:radial-gradient(circle at top,var(--p)0,transparent 40%),radial-gradient(circle at 20% 20%,rgba(16,185,129,.15)0,transparent 30%);opacity:.08;pointer-events:none;z-index:-1}
  .wrap{max-width:1100px;margin:auto;background:var(--c);border-radius:20px;overflow:hidden;box-shadow:var(--sh);transition:box-shadow .3s ease;animation:fadeInUp .6s ease-out}
    @keyframes fadeInUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
    header{background:linear-gradient(135deg,var(--p),#3b82f6,#6366f1);color:#fff;padding:2.5rem 1.5rem 2rem;text-align:center;position:relative;overflow:hidden}
    header::before{content:'';position:absolute;top:-50%;right:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.1) 0%,transparent 70%);pointer-events:none}
    h1{font-size:2rem;font-weight:700;margin:0 0 .5rem;position:relative;z-index:1;text-shadow:0 2px 4px rgba(0,0,0,.1)}
    .toggle{position:absolute;top:1rem;right:1rem;width:44px;height:44px;border-radius:50%;background:rgba(255,255,255,.2);backdrop-filter:blur(10px);border:none;color:#fff;font-size:1.3rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s cubic-bezier(0.4,0,0.2,1);z-index:2}
    .toggle:hover{transform:scale(1.1) rotate(15deg);background:rgba(255,255,255,.3)}
    .toggle:active{transform:scale(0.95)}
    .sec{padding:1.5rem;transition:padding .3s ease}
  h2{font-size:1.4rem;color:var(--p);margin:1.2rem 0 .8rem;display:flex;gap:.5rem;align-items:center;font-weight:600;transition:color .3s ease}
  ul{list-style:none;display:grid;gap:.5rem;font-size:.95rem;color:var(--m);line-height:1.8;padding:0}
  table{width:100%;border-collapse:collapse;border:1px solid var(--b);border-radius:12px;overflow:hidden;margin:1rem 0;font-size:.95rem;box-shadow:0 2px 8px rgba(0,0,0,.05);background:var(--c)}
    th{background:linear-gradient(135deg,var(--p),#3b82f6);color:#fff;padding:.9rem .7rem;text-align:center;font-weight:600;text-shadow:0 1px 2px rgba(0,0,0,.1)}
    td{padding:.8rem .7rem;text-align:center;border-bottom:1px solid var(--b);transition:background-color .2s ease}
    tr:hover{background:rgba(37,99,235,.05)}
    tr:last-child td{border-bottom:none}
    .hl{color:var(--s);font-weight:700;font-size:1.1em}
    .chart{margin:1rem 0;background:var(--c);border:1px solid var(--b);border-radius:16px;padding:1.2rem;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,.05);transition:all .3s ease}
    #c{overflow:visible;min-height:230px;position:relative}
    .grid{display:grid;gap:1rem;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));margin-top:.5rem}
  .card{background:var(--c);border:1px solid var(--b);border-radius:14px;padding:1.1rem;transition:all .3s cubic-bezier(0.4,0,0.2,1);cursor:pointer;position:relative;overflow:hidden}
    .card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--p),var(--s));transform:scaleX(0);transition:transform .3s ease;transform-origin:left}
    .card:hover{transform:translateY(-4px);box-shadow:var(--sh-hover);border-color:var(--p)}
    .card:hover::before{transform:scaleX(1)}
    .card[aria-expanded="true"]::before{transform:scaleX(1)}
    .card h3{font-size:1.15rem;margin:0 0 .6rem;display:flex;gap:.4rem;align-items:center;font-weight:600}
    .tag{background:linear-gradient(135deg,var(--p),#3b82f6);color:#fff;padding:.25rem .7rem;border-radius:99px;font-size:.7rem;font-weight:600;box-shadow:0 2px 4px rgba(37,99,235,.2)}
    .flag { font-size: 1.3em; margin-right: 4px; }
    .con{background:linear-gradient(135deg,#ecfdf5,#f0fdf4);border:1px solid #86efac;border-radius:16px;padding:1.5rem;margin:1.5rem 0;box-shadow:0 4px 12px rgba(16,185,129,.1)}
    [data-theme=dark] .con{background:linear-gradient(135deg,#052e22,#064e3b);border-color:#14532d;color:#bbf7d0}
  footer{text-align:center;padding:1.2rem;color:var(--m);font-size:.8rem;border-top:1px solid var(--b);background:var(--c)}
  .toggle:focus-visible,.card:focus-visible{outline:3px solid rgba(37,99,235,.4);outline-offset:3px}
  .toggle svg,.card svg{flex-shrink:0}
    .tooltip{position:fixed;background:rgba(15,23,42,.95);backdrop-filter:blur(10px);color:#fff;padding:10px 14px;border-radius:10px;font-size:.85rem;pointer-events:none;opacity:0;box-shadow:0 8px 24px rgba(0,0,0,.3);z-index:1000;white-space:nowrap;transition:opacity .2s ease;border:1px solid rgba(255,255,255,.1)}
    @media print{.toggle,footer{display:none}.wrap{box-shadow:none}}

    /* â”€â”€ í™•ì¥ ìƒì„¸(ì•„ì½”ë””ì–¸) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .card-btn{all:unset;display:block;cursor:pointer;width:100%}
    .meta{font-size:.92rem;color:var(--m);margin:.35rem 0 .6rem;display:flex;flex-wrap:wrap;gap:.3rem}
    .arrow{margin-left:auto;transition:transform .3s cubic-bezier(0.4,0,0.2,1);flex-shrink:0}
    .details{max-height:0;overflow:hidden;transition:max-height .4s cubic-bezier(0.4,0,0.2,1);border-top:1px dashed var(--b);margin-top:.6rem;padding-top:0}
    .details-inner{display:grid;grid-template-columns:1fr;gap:.5rem;font-size:.93rem;padding-top:.6rem}
    .details b{color:var(--s);font-weight:600;display:inline-block;margin-bottom:.3rem}
    .card[aria-expanded="true"]{border-color:var(--p);box-shadow:var(--sh);background:linear-gradient(to bottom,var(--c),rgba(37,99,235,.02))}
    .card[aria-expanded="true"] .arrow{transform:rotate(180deg)}
    .pill{display:inline-block;background:rgba(16,185,129,.12);color:var(--s);border:1px solid rgba(16,185,129,.25);border-radius:999px;padding:.2rem .6rem;font-size:.72rem;margin-right:.3rem;font-weight:500;transition:all .2s ease}
    .pill:hover{background:rgba(16,185,129,.2);transform:scale(1.05)}
  .card-btn:focus-visible{outline:none}
  .card[role=button]{outline:none}

  @media (min-width:1200px){
    .wrap{max-width:1300px}
    header{padding:3rem 2rem 2.2rem}
    .grid{grid-template-columns:repeat(auto-fit,minmax(310px,1fr))}
  }

  @media (prefers-reduced-motion:reduce){
    *,*::before,*::after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition:none!important;scroll-behavior:auto!important}
  }

    /* â”€â”€ ëª¨ë°”ì¼ ì„¸ë¡œ í™”ë©´ ìµœì í™” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    @media (max-width: 768px) and (orientation: portrait) {
      body{padding:.5rem}
      .wrap{border-radius:12px}
      header{padding:2rem 1rem 1.5rem}
      h1{font-size:1.5rem}
      .toggle{width:38px;height:38px;top:.75rem;right:.75rem}
      .sec{padding:1rem}
      h2{font-size:1.2rem;margin:1rem 0 .6rem}
      table{font-size:.85rem;display:block;overflow-x:auto;-webkit-overflow-scrolling:touch;border:none}
      table thead{display:none}
      table tbody{display:block}
      table tr{display:block;border:1px solid var(--b);border-radius:8px;margin-bottom:.75rem;padding:0;background:var(--c);box-shadow:0 2px 4px rgba(0,0,0,.05);overflow:hidden}
      table td{display:flex;justify-content:space-between;align-items:center;padding:.75rem 1rem;border-bottom:1px solid var(--b);text-align:left;width:100%}
      table td:before{content:attr(data-label);font-weight:600;color:var(--p);margin-right:1rem;flex-shrink:0;min-width:120px}
      table td:last-child{border-bottom:none}
      table td strong{color:var(--t);font-weight:600}
      .chart{padding:.8rem;margin:.8rem 0;border-radius:12px;overflow-x:auto;-webkit-overflow-scrolling:touch}
      #c{min-height:300px;padding:.5rem 0;width:100%;overflow-x:auto}
      .grid{grid-template-columns:1fr;gap:.8rem}
      .card{padding:.9rem;border-radius:12px}
      .card h3{font-size:1.05rem}
      .con{padding:1rem;margin:1rem 0;border-radius:12px}
      footer{padding:1rem;font-size:.75rem}
    }

    /* â”€â”€ ëª¨ë°”ì¼ ê·¸ë˜í”„ ì‹œì¸ì„± ê°œì„  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    @media (max-width: 768px) and (orientation: portrait) {
      #c svg{width:100%!important;height:auto!important}
      #c .bar{min-height:32px!important;rx:6px!important}
      #c text{font-size:13px!important;font-weight:600!important}
      #c .y-axis text{font-size:12px!important;transform:translateX(-4px)}
      #c .x-axis text{font-size:11px!important}
      #c .val{font-size:13px!important;font-weight:700!important}
    }

    /* â”€â”€ ì‘ì€ ëª¨ë°”ì¼ í™”ë©´ ì¶”ê°€ ìµœì í™” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    @media (max-width: 480px) and (orientation: portrait) {
      #c{min-height:350px}
      #c .bar{min-height:36px!important}
      #c text{font-size:12px!important}
      #c .y-axis text{font-size:11px!important}
      #c .val{font-size:12px!important}
      h1{font-size:1.3rem}
      header p{font-size:.85rem}
    }
  
  
  /* â”€â”€ Itinerary visibility upgrades (high contrast) */
  #itinerary-grid .card{
    border-left:6px solid var(--b);
    background:linear-gradient(180deg, rgba(255,255,255,1), rgba(245,248,255,1));
  }
  #itinerary-grid .card.itinerary-card{cursor:default}
  [data-theme=dark] #itinerary-grid .card{
    background:linear-gradient(180deg,rgba(15,23,42,.95),rgba(15,23,42,.8));
    border-left-color:#334155;
  }
  .it-title h3{
    font-size:1.1rem;
    font-weight:800;
    color:var(--k);
    letter-spacing:-.01em;
  }
  .it-sub{
    color:var(--k);
    font-weight:600;
    font-size:.95rem;
    margin:0 0 .85rem 0;
    opacity:.9;
  }
  .it-days{
    display:flex;
    flex-direction:column;
    gap:.65rem;
    margin:.25rem 0 0 0;
    padding:0;
    list-style:none;
  }
  .it-day{
    display:grid;
    grid-template-columns:auto 1fr;
    gap:.7rem;
    align-items:start;
    background:rgba(37, 99, 235, 0.08); /* light blue tint */
    border:1px solid rgba(37, 99, 235, 0.18);
    border-radius:14px;
    padding:.7rem .8rem;
    box-shadow:0 1px 0 rgba(0,0,0,.04);
  }
  .day-badge{
    font-weight:900;
    font-size:.9rem;
    line-height:1;
    padding:.45rem .85rem;
    border-radius:999px;
    background:linear-gradient(130deg,var(--p),#4f46e5);
    color:#fff;
    white-space:nowrap;
    box-shadow:0 4px 10px rgba(79,70,229,.35);
    border:1px solid rgba(255,255,255,.25);
  }
  .day-text{
    color:var(--k);
    font-size:1.02rem;
    font-weight:600;
  }
  .day-text small{
    color:var(--m);
    font-size:.92rem;
    font-weight:500;
  }

</style>
</head>
<body>
<div class="wrap">
  <header>
    <button class="toggle" id="t" aria-label="í…Œë§ˆ ì „í™˜">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18z"/></svg>
    </button>
    <h1>2026ë…„ 2ì›” 1ì£¼ì°¨ ê°€ì¡±ì—¬í–‰ ë¹„êµ</h1>
    <p>ë‹¤ë‚­ vs í‘¸ê¾¸ì˜¥ vs ë‚˜íŠ¸ë‘ | 5ë°• 6ì¼ | 4ì¸ ê°€ì¡± ê¸°ì¤€</p>
  </header>

  <div class="sec">
    <h2>ë¹„ìš© ì‚°ì • ê¸°ì¤€</h2>
    <ul>
      <li><strong>ê¸°ì¤€ ì¸ì›:</strong> 4ì¸ ê°€ì¡±</li>
      <li><strong>ì—¬í–‰ ì¼ì •:</strong> 5ë°• 6ì¼</li>
      <li><strong>ì‚°ì • ë°©ì‹:</strong> ìˆ™ë°•ë¹„(5ë°•, 2ê°ì‹¤) + ì²´ë¥˜ë¹„(4ì¸Ã—5ì¼) + ì™•ë³µ í•­ê³µê¶Œ(4ì¸)</li>
      <li><strong>í™˜ìœ¨:</strong> 1 USD = â‚©1,420 (2025ë…„ í‰ê· ì¹˜ ê¸°ë°˜)</li>
      <li><strong>ë‹¨ìœ„:</strong> ì›í™”(ë§Œì›), ë°˜ì˜¬ë¦¼</li>
      <li><strong>í•­ê³µê¶Œ:</strong> 2026ë…„ 2ì›” 1ì£¼ì°¨ ì„±ìˆ˜ê¸° ì¶”ì •ì¹˜ (ìµœê·¼ ìµœì €ê°€ ê¸°ì¤€ ì•½ 1.9~2.0ë°° ìƒí–¥)</li>
      <li><strong>êµí†µë¹„:</strong> ëŒ€í‘œ ì´ë™ìˆ˜ë‹¨ ê¸°ì¤€ ë³„ë„ í‘œê¸°</li>
      <li><strong>ìˆ¨ì€ ì§€ë¢° ë¹„ìš©:</strong> ë¦¬ì¡°íŠ¸í”¼/ì…ë„ì„¸/ì„¬ì´ë™/íŒ ë“± ë³„ë„ í‘œê¸°</li>
    </ul>
  </div>

  <div class="sec chart">
    <h2>ì¢…í•© ìŠ¤ì½”ì–´ ë¹„êµ</h2>
    <div id="c" style="min-height:230px"></div>
  </div>

  <div class="sec">
    <h2>5ë°•6ì¼ ê¸°ì¤€ ê°€ì¡±ì—¬í–‰ ê°€ì„±ë¹„ ìŠ¤ì½”ì–´</h2>
    <table id="score-table">
      <thead>
      <tr><th>ì—¬í–‰ì§€</th><th>ì´ì•¡(5ë°•6ì¼)</th><th>í•­ê³µê¶Œ(4ì¸ ì™•ë³µ)</th><th>ìŠ¤ì½”ì–´</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <div class="sec">
    <h2>ì§€ì—­ë³„ ìš”ì•½</h2>
    <div class="grid" id="grid"></div>
  </div>

  <div class="sec">
    <h2>ê°€ì¡± ë§ì¶¤ 5ë°• 6ì¼ ì¼ì • ì œì•ˆ</h2>
    <p style="color:var(--m);font-size:.95rem;margin:.2rem 0 1rem">
      ì•„ì´ 9ì„¸Â·3ì„¸ / ìˆ˜ì˜ ë§¤ìš° ì„ í˜¸ / ìš´ì „ ê°€ëŠ¥ / íœ´ì–‘ 70% Â· ì•¡í‹°ë¹„í‹° 30% ê¸°ì¤€ìœ¼ë¡œ,
      â€œì˜¤ì „ 1ì½”ìŠ¤ â†’ ì ì‹¬ â†’ ë‚®ì /ë¦¬ì¡°íŠ¸ â†’ ì €ë… ë¼ì´íŠ¸â€ ë£¨í‹´ì— ë§ì¶˜ ì¶”ì²œ ì¼ì •ì…ë‹ˆë‹¤.
    </p>
    <div class="grid" id="itinerary-grid"></div>
  </div>

  <div class="sec con">
    <h2>í”Œë˜ë„ˆ ê²°ë¡  (3ì¤„ ìš”ì•½)</h2>
    <p><strong>ê°€ì„±ë¹„/ì•ˆì •/ë™ì„ :</strong> <strong>ë‹¤ë‚­ 1ë“±</strong>. "ë¬´ë‚œí•˜ê²Œ ì„±ê³µí•˜ëŠ” ë¹Œë“œ."</p>
    <p><strong>2ì›” ë¬¼ë†€ì´/ë¦¬ì¡°íŠ¸ íœ´ì–‘:</strong> <strong>í‘¸ê¾¸ì˜¥ì´ ìµœê°•</strong>ì¸ë°, <strong>ì˜ˆì‚°ì€ í™•ì‹¤íˆ ë” ë“¦.</strong></p>
    <p><strong>ì¤‘ê°„ í¬ì§€ì…˜(ìˆ˜ì˜¨ ì¢‹ê³  ë¹„ìš© ëœí•¨):</strong> <strong>ë‚˜íŠ¸ë‘ì´ ë°¸ëŸ°ìŠ¤ í”½.</strong></p>
    <p style="margin-top:1rem;font-weight:500;color:#166534">
      â†’ <em>ìŠ¤ì½”ì–´ = 3ê°œ ì¤‘ ìµœì € ì´ì•¡(ë‹¤ë‚­) ëŒ€ë¹„ ìƒëŒ€ê°€ì„±ë¹„. "ê°€ì¡± í¸ì˜/ì‹œì¦Œ ì í•©ë„"ë¥¼ ê°™ì´ ë³´ë©´ ì²´ê° ìˆœìœ„ê°€ ë” ë²Œì–´ì§.</em>
    </p>
  </div>

  <footer>2026ë…„ 2ì›” 1ì£¼ì°¨ ê°€ì¡±ì—¬í–‰ ë¹„êµ ê°€ì´ë“œ | ë‹¤ë‚­ vs í‘¸ê¾¸ì˜¥ vs ë‚˜íŠ¸ë‘ | 5ë°• 6ì¼ 4ì¸ ê°€ì¡± ê¸°ì¤€ | ê¸°ì¤€ì¼: 2025-11-26</footer>
</div>

<!-- ============================================ -->
<!-- ë°ì´í„° ì„¹ì…˜: ì»¨í…ì¸ ì™€ ì½”ë“œ ë¶„ë¦¬              -->
<!-- ============================================ -->
<script type="application/json" id="data-scores">
[
  {"region":"ë‹¤ë‚­","total":301,"flight":137,"score":100},
  {"region":"ë‚˜íŠ¸ë‘(ìº„ë€)","total":330,"flight":152,"score":91},
  {"region":"í‘¸ê¾¸ì˜¥","total":370,"flight":202,"score":81}
]
</script>

<script type="application/json" id="data-cards">
[
  {"key":"ë‹¤ë‚­","flag":"ğŸ‡»ğŸ‡³","rank":"1ìœ„","total":"301ë§Œì› ($2,120)","transport":"Grab","pros":"ë™ì„  ë‹¨ìˆœ, ë¦¬ì¡°íŠ¸+ë„ì‹œ, í‚¤ì¦ˆí’€/í‚¤ì¦ˆí´ëŸ½ ë¦¬ì¡°íŠ¸ ë§ìŒ, ì˜ë£Œ/ë§ˆíŠ¸ ì ‘ê·¼ì„± ì¢‹ìŒ","cons":"í•œêµ­ ë°©í•™ í”¼í¬ë©´ ì¸ê¸° ë¦¬ì¡°íŠ¸ ì¡°ê¸°ì™„íŒ"},
  {"key":"ë‚˜íŠ¸ë‘(ìº„ë€)","flag":"ğŸ‡»ğŸ‡³","rank":"2ìœ„","total":"330ë§Œì› ($2,320)","transport":"Grab/ì°¨ëŸ‰","pros":"2ì›” ìˆ˜ì˜¨ ìµœì (26Â°C), í•´ë³€ ì»¨ë””ì…˜ ìš°ìˆ˜, ìº„ë€ ë¦¬ì¡°íŠ¸ ë¼ì¸ ê°€ì¡±í˜•, ìˆ˜ì˜/í˜¸í•‘ ë§Œì¡±ë„ ë†’ìŒ","cons":"ë¦¬ì¡°íŠ¸ì¡´ì— ë¬¶ì´ë©´ ì¢‹ì§€ë§Œ ë¨¼ íˆ¬ì–´ ë„£ìœ¼ë©´ êµí†µ í”¼ë¡œë„ ìƒìŠ¹"},
  {"key":"í‘¸ê¾¸ì˜¥","flag":"ğŸ‡»ğŸ‡³","rank":"3ìœ„","total":"370ë§Œì› ($2,610)","transport":"ë¦¬ì¡°íŠ¸ ì…”í‹€/Grab","pros":"2ì›” ë°”ë‹¤ ì»¨ë””ì…˜ GOAT(ìˆ˜ì˜¨ 28Â°C), ìƒˆ ë¦¬ì¡°íŠ¸/ëŒ€í˜• í‚¤ì¦ˆ ì‹œì„¤, ì„¬ íœ´ì–‘ìœ¼ë¡œ í•˜ë£¨ ë£¨í‹´ ë‹¨ìˆœ","cons":"í•­ê³µÂ·ìˆ™ë°• ì„±ìˆ˜ê¸° í”„ë¦¬ë¯¸ì—„ í¼, ì‘ê¸‰ ì˜ë£Œ/ëŒ€í˜• ì‡¼í•‘ ì¸í”„ë¼ ì•½í•¨"}
]
</script>

<script type="application/json" id="data-details">
{
    "ë‹¤ë‚­": {
      "ì´ì•¡": "301ë§Œì› / ì•½ $2,120",
      "í•­ê³µê¶Œ": "137ë§Œì› / 4ì¸ ì™•ë³µ (ìµœê·¼ ìµœì € ì™•ë³µ $121 ìˆ˜ì¤€ ê¸°ì¤€, ì„±ìˆ˜ê¸° 2ë°° ìƒí–¥ ì¶”ì •)",
      "ë¹„í–‰ì‹œê°„": "ì•½ 5ì‹œê°„ (ì§í•­)",
      "êµí†µ": "Grab ì¤‘ì‹¬. ê³µí•­â†’ë¯¸ì¼€ë¹„ì¹˜ 15~20ë¶„, í˜¸ì¶œ ìŠ¤íŠ¸ë ˆìŠ¤ ë‚®ìŒ.",
      "2ì›” 1ì£¼ì°¨ ë‚ ì”¨": "ê±´ê¸° ì„±í–¥. ë¹„ ì ê³  ì„ ì„ í•¨. ë°”ë‹¤ ìˆ˜ì˜¨ ì•½ 24Â°C ê·¼ì²˜ë¡œ 'ì¶¥ì§„ ì•Šì€ë° ëœ¨ê²ì§€ë„ ì•ŠìŒ'.",
      "ê°€ì¡± ë² ìŠ¤íŠ¸ í¬ì¸íŠ¸": "1) ë™ì„  ë‹¨ìˆœ: ì‹œë‚´Â·ë¦¬ì¡°íŠ¸Â·ê´€ê´‘ì´ í•œ ì¶•ì— ëª°ë ¤ìˆì–´ì„œ ì• ë“¤ ë°ë¦¬ê³  êµ´ë¦¬ê¸° ì¢‹ìŒ. 2) ë¦¬ì¡°íŠ¸/í‚¤ì¦ˆ ì¸í”„ë¼: í‚¤ì¦ˆí’€Â·í‚¤ì¦ˆí´ëŸ½ ìˆëŠ” ìˆ™ì†Œ ì„ íƒ í­ ë„“ìŒ. 3) ì˜ë£Œ/ë§ˆíŠ¸ ì ‘ê·¼: 'í˜¹ì‹œ ì•  ì•„í”„ë©´?' ëŒ€ì‘ì´ ì‰¬ì›€.",
      "ë¦¬ìŠ¤í¬/ì£¼ì˜": "í•œêµ­ ë°©í•™ í”¼í¬ë©´ ìˆ™ë°•ì´ ë¹¨ë¦¬ ì°¨ì„œ ì¢‹ì€ ë°© íƒ€ì…ì´ ì‚¬ë¼ì§.",
      "í•œ ì¤„ ì¶”ì²œ": "ê°€ì„±ë¹„ + ë™ì„  ì•ˆì •ì´ ìµœìš°ì„ ì´ë©´ ë‹¤ë‚­ì´ í‘œì¤€í•´ë‹µ."
    },
    "ë‚˜íŠ¸ë‘(ìº„ë€)": {
      "ì´ì•¡": "330ë§Œì› / ì•½ $2,320",
      "í•­ê³µê¶Œ": "152ë§Œì› / 4ì¸ ì™•ë³µ (ìµœê·¼ ìµœì € ì™•ë³µ $141 ê¸°ì¤€, ì„±ìˆ˜ê¸° 1.9ë°° ìƒí–¥)",
      "ë¹„í–‰ì‹œê°„": "ì•½ 5ì‹œê°„ 15ë¶„ (ì§í•­)",
      "êµí†µ": "ë¦¬ì¡°íŠ¸ì¡´(ìº„ë€) ê¸°ì¤€ ì°¨ëŸ‰/Grab í˜¼ìš©. ê³µí•­ ì ‘ê·¼ì´ ì¢‹ìŒ.",
      "2ì›” 1ì£¼ì°¨ ë‚ ì”¨": "ë“œë¼ì´ ì‹œì¦Œ ìƒìœ„ êµ¬ê°„. í‰ê·  22~28Â°C, ê°•ìˆ˜ ì ê³  í•´ì–‘ ì•¡í‹°ë¹„í‹° í•˜ê¸° ë”± ì¢‹ìŒ. ìˆ˜ì˜¨ë„ ì•½ 26Â°C.",
      "ê°€ì¡± ë² ìŠ¤íŠ¸ í¬ì¸íŠ¸": "1) í•´ë³€ ì»¨ë””ì…˜/ìˆ˜ì˜¨ì´ 2ì›”ì— ë” ìœ ë¦¬: ë‹¤ë‚­ë³´ë‹¤ 'ìˆ˜ì˜/í˜¸í•‘ ë§Œì¡±ë„'ê°€ ë†’ê²Œ ë‚˜ì˜´. 2) ìº„ë€ ë¦¬ì¡°íŠ¸ ë¼ì¸ì´ ê°€ì¡±í˜•ìœ¼ë¡œ ì˜ ê¹”ë ¤ìˆìŒ(í‚¤ì¦ˆí’€/ì¡°ì‹/í”„ë¼ì´ë¹— ë¹„ì¹˜). 3) ì‹œë‚´ ê´€ê´‘ë„ ì ë‹¹íˆ ì„ê¸° ì‰¬ì›€(ë„ˆë¬´ ë¬´ê²ì§€ ì•Šì€ ë„ì‹œí˜• ì˜µì…˜).",
      "ë¦¬ìŠ¤í¬/ì£¼ì˜": "ë¦¬ì¡°íŠ¸ì¡´ì— ë¬¶ì´ë©´ ì¢‹ì§€ë§Œ, ìš•ì‹¬ë‚´ì„œ ë¨¼ íˆ¬ì–´ ë„£ìœ¼ë©´ êµí†µ í”¼ë¡œë„ ìƒìŠ¹.",
      "í•œ ì¤„ ì¶”ì²œ": "2ì›” ë¬¼ë†€ì´ í™•ì‹¤íˆ í•˜ê³  ì‹¶ì€ ê°€ì¡±ì€ ë‚˜íŠ¸ë‘ì´ ë” ê¹”ë”."
    },
    "í‘¸ê¾¸ì˜¥": {
      "ì´ì•¡": "370ë§Œì› / ì•½ $2,610",
      "í•­ê³µê¶Œ": "202ë§Œì› / 4ì¸ ì™•ë³µ (ìµœê·¼ ìµœì € ì™•ë³µ $178 ê¸°ì¤€, ì„±ìˆ˜ê¸° 2ë°° ìƒí–¥)",
      "ë¹„í–‰ì‹œê°„": "ì•½ 5ì‹œê°„ 45ë¶„~6ì‹œê°„ (ì§í•­)",
      "êµí†µ": "ë¦¬ì¡°íŠ¸ ì…”í‹€/ê·¸ë©/ê¸°ì‚¬ í¬í•¨ í˜¼ìš©. ì„¬ íŠ¹ì„±ìƒ ì´ë™ì€ 'ì§§ê³  ë¹„ì‹¸ë‹¤' ìª½.",
      "2ì›” 1ì£¼ì°¨ ë‚ ì”¨": "ê±´ê¸° í”¼í¬. í‰ê·  25~27Â°C, ê°•ìˆ˜ ë§¤ìš° ì ê³  ìˆ˜ì˜¨ì´ ì•½ 28Â°Cë¡œ ë² íŠ¸ë‚¨ ë‚´ ìµœê³ ê¸‰ ë¬¼ë†€ì´ ì»¨ë””ì…˜.",
      "ê°€ì¡± ë² ìŠ¤íŠ¸ í¬ì¸íŠ¸": "1) 2ì›” ë°”ë‹¤ ì»¨ë””ì…˜ GOAT: ì• ë“¤ ë¬¼ë†€ì´ ë§Œì¡±ë„ ìµœìƒ. 2) ìƒˆ ë¦¬ì¡°íŠ¸/ëŒ€í˜• í‚¤ì¦ˆ ì‹œì„¤ ë§ì€ í¸(íŠ¹íˆ ë‚¨ë¶€Â·ì„œë¶€ í•´ì•ˆ). 3) 'ì„¬ íœ´ì–‘'ì´ë¼ í•˜ë£¨ ë£¨í‹´ì´ ë‹¨ìˆœí•´ì ¸ì„œ ë¶€ëª¨ë„ ì‚´ í™•ë¥  ë†’ìŒ.",
      "ë¦¬ìŠ¤í¬/ì£¼ì˜(ìˆ¨ì€ ì§€ë¢°)": "í•­ê³µÂ·ìˆ™ë°• ì„±ìˆ˜ê¸° í”„ë¦¬ë¯¸ì—„ì´ ì œì¼ í¬ê²Œ ë¶™ëŠ” ê³³ì´ë¼ ì´ì•¡ì´ í›… ë›°ì–´. ì„¬ì´ë¼ ì‘ê¸‰ ì˜ë£Œ/ëŒ€í˜• ì‡¼í•‘ ì¸í”„ë¼ëŠ” ë‹¤ë‚­Â·ë‚˜íŠ¸ë‘ë³´ë‹¤ ì•½í•¨.",
      "í•œ ì¤„ ì¶”ì²œ": "ëˆ ì¢€ ë” ì¨ë„ 2ì›” 'ì§„ì§œ íœ´ì–‘+ë¬¼ë†€ì´' ì›í•˜ë©´ í‘¸ê¾¸ì˜¥."
    }
}

</script>

<script type="application/json" id="data-itineraries">
{
  "ë‹¤ë‚­": [
    "Day1 ë„ì°©Â·ì²´í¬ì¸ â†’ ë¦¬ì¡°íŠ¸/ë¯¸ì¼€ë¹„ì¹˜ ë¬¼ë†€ì´, ê°€ë²¼ìš´ ì €ë…",
    "Day2 ì˜¤ì „ ë°”ë‚˜í(í…Œë§ˆíŒŒí¬Â·ì¼€ì´ë¸”ì¹´) â†’ ì˜¤í›„ ë¦¬ì¡°íŠ¸ ìˆ˜ì˜/íœ´ì‹",
    "Day3 ì˜¤ì „ ë¦¬ì¡°íŠ¸ ë°ì´(í‚¤ì¦ˆí’€/í•´ë³€) â†’ ì˜¤í›„ ë‚®ì  â†’ ì €ë… í˜¸ì´ì•ˆ ì•¼ê²½ ë°˜ë‚˜ì ˆ",
    "Day4 ì˜¤ì „ ì§§ì€ í˜¸í•‘/ìŠ¤ë…¸í´ or ì˜¤í–‰ì‚° ì‚°ì±… â†’ ì˜¤í›„ ë¦¬ì¡°íŠ¸ ë³µê·€",
    "Day5 ì˜¤ì „ ììœ  ë¬¼ë†€ì´ + ë¶€ëª¨ ìŠ¤íŒŒ/ë§ˆì‚¬ì§€ â†’ ì˜¤í›„ ì‹œë‚´ ì¹´í˜Â·ì‹œì¥ ë¼ì´íŠ¸ ì‡¼í•‘",
    "Day6 ì²´í¬ì•„ì›ƒÂ·ê·€êµ­"
  ],
  "ë‚˜íŠ¸ë‘(ìº„ë€)": [
    "Day1 ë„ì°© â†’ ìº„ë€ ë¦¬ì¡°íŠ¸ ì²´í¬ì¸, í”„ë¼ì´ë¹— ë¹„ì¹˜/í‚¤ì¦ˆí’€",
    "Day2 ì˜¤ì „~ì˜¤í›„ ë¹ˆì›ë”ìŠ¤/ì›Œí„°íŒŒí¬(ì•„ì´ ë©”ì¸) â†’ ëŠ¦ì€ ì˜¤í›„ ë¦¬ì¡°íŠ¸ íœ´ì‹",
    "Day3 ì˜¬ë°ì´ ë¦¬ì¡°íŠ¸ ë°ì´(ìˆ˜ì˜Â·ëª¨ë˜ë†€ì´Â·í‚¤ì¦ˆí´ëŸ½), ë¶€ëª¨ ìŠ¤íŒŒ ì˜µì…˜",
    "Day4 ì˜¤ì „ ê°€ì¡± ë‚œì´ë„ ë‚®ì€ í˜¸í•‘/ìŠ¤ë…¸í´ â†’ ì˜¤í›„ ë‚®ì /ìˆ˜ì˜",
    "Day5 ì˜¤ì „ ë¦¬ì¡°íŠ¸ ë§ˆì§€ë§‰ ìˆ˜ì˜ â†’ ì˜¤í›„ ë‚˜íŠ¸ë‘ ì‹œë‚´ ë°˜ë‚˜ì ˆ(ì¹´í˜Â·ì•¼ì‹œì¥) + ë§ˆì‚¬ì§€",
    "Day6 ì²´í¬ì•„ì›ƒÂ·ê·€êµ­"
  ],
  "í‘¸ê¾¸ì˜¥": [
    "Day1 ë„ì°©Â·ë¦¬ì¡°íŠ¸ ì•ˆì°© â†’ í•´ë³€/í‚¤ì¦ˆí’€, ì„¬ ì ì‘",
    "Day2 ì˜¤ì „ í˜¼ë˜”ì„¬ ì¼€ì´ë¸”ì¹´+ì›Œí„°íŒŒí¬(ë‚¨ë¶€) â†’ ì˜¤í›„ ë¦¬ì¡°íŠ¸ ë³µê·€",
    "Day3 ì˜¬ë°ì´ ë¦¬ì¡°íŠ¸ ë°ì´(2ì›” ìµœì  ìˆ˜ì˜¨ 28Â°C í™œìš©, ë¬¼ë†€ì´ ì˜¬ì¸)",
    "Day4 ì˜¤ì „ ë¹ˆí„ ì‚¬íŒŒë¦¬+ë¹ˆì›ë”ìŠ¤(ì´ˆë“± ì•„ì´ ìœ„ì£¼, 3ì„¸ëŠ” ì‚¬íŒŒë¦¬ë§Œë„ OK) â†’ ì˜¤í›„ íœ´ì‹",
    "Day5 ì˜¤ì „ ë§ˆì§€ë§‰ ë¹„ì¹˜/ìŠ¤ë…¸í´(ì§§ê²Œ) â†’ ì˜¤í›„ ì‰¬ê³  ì €ë… ì•¼ì‹œì¥/í•´ì‚°ë¬¼",
    "Day6 ì²´í¬ì•„ì›ƒÂ·ê·€êµ­"
  ]
}
</script>

<script>
  // â”€â”€ ë°ì´í„° ë¡œë“œ: JSONì—ì„œ ì»¨í…ì¸  ì½ê¸°
  const scoreData = JSON.parse(document.getElementById('data-scores').textContent);
  const cardData = JSON.parse(document.getElementById('data-cards').textContent);
  const detailsData = JSON.parse(document.getElementById('data-details').textContent);
  const itineraryData = JSON.parse(document.getElementById('data-itineraries').textContent);

  const chartContainer = document.getElementById('c');
  const cardLookup = cardData.reduce((acc, card) => {
    acc[card.key] = card;
    return acc;
  }, {});

  // â”€â”€ í…Œë§ˆ í† ê¸€ (ì‹œìŠ¤í…œ ì„ í˜¸ë„ ì—°ë™)
  const btn=document.getElementById('t'),root=document.documentElement;
  const sun='<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 7a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm0-5v2m0 14v2m8-8h-2M6 12H4m12.364-5.636l-1.414 1.414M7.05 7.05l-1.414 1.414m12.728 12.728l-1.414-1.414M7.05 16.95l-1.414-1.414"/></svg>';
  const moon='<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>';
  const themeKey='theme-pref';
  const sysPref = window.matchMedia('(prefers-color-scheme: dark)');
  btn.setAttribute('title','í…Œë§ˆ ì „í™˜');

  const applyTheme = (theme, persist = true) => {
    root.dataset.theme = theme;
    btn.innerHTML = theme === 'dark' ? sun : moon;
    btn.setAttribute('aria-pressed', theme === 'dark');
    if (persist) localStorage.setItem(themeKey, theme);
  };

  const storedTheme = localStorage.getItem(themeKey);
  applyTheme(storedTheme || (sysPref.matches ? 'dark' : 'light'), false);

  btn.addEventListener('click', () => {
    const next = root.dataset.theme === 'dark' ? 'light' : 'dark';
    applyTheme(next);
  });

  const handleSystemThemeChange = (event) => {
    if (!localStorage.getItem(themeKey)) {
      applyTheme(event.matches ? 'dark' : 'light', false);
    }
  };
  if (sysPref.addEventListener) {
    sysPref.addEventListener('change', handleSystemThemeChange);
  } else if (sysPref.addListener) {
    sysPref.addListener(handleSystemThemeChange);
  }

  // â”€â”€ í…Œì´ë¸” ë Œë”ë§ (ëª¨ë°”ì¼ ëŒ€ì‘)
  function renderTable() {
    const tbody = document.querySelector('#score-table tbody');
    tbody.innerHTML = scoreData.map(item => {
      const isHighlight = item.score >= 90;
      const scoreClass = isHighlight ? ' class="hl"' : '';
      return `<tr>
        <td data-label="ì—¬í–‰ì§€">${item.region}</td>
        <td data-label="ì´ì•¡(5ë°•6ì¼)"><strong>${item.total}ë§Œì›</strong></td>
        <td data-label="í•­ê³µê¶Œ(4ì¸ ì™•ë³µ)">${item.flight}ë§Œì›</td>
        <td data-label="ìŠ¤ì½”ì–´"${scoreClass}>${item.score}</td>
      </tr>`;
    }).join('');
  }
  renderTable();

  // â”€â”€ ì¹´ë“œ ë Œë”ë§
  function renderCards() {
    const grid = document.getElementById('grid');
    grid.innerHTML = cardData.map(card => {
      const rankTag = card.rank ? `<span class="tag">${card.rank}</span>` : '';
      return `<div class="card" data-key="${card.key}" tabindex="0" role="button" aria-expanded="false" aria-controls="detail-${card.key}">
        <div class="card-btn">
          <h3><span class="flag">${card.flag}</span> ${card.key} ${rankTag}
            <svg class="arrow" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 15l-7-7h14z"/></svg>
          </h3>
          <p class="meta"><span class="pill">ì´ì•¡ ${card.total}</span> <span class="pill">êµí†µ ${card.transport}</span></p>
          <p><strong>ì¥ì :</strong> ${card.pros} Â· <strong>ë‹¨ì :</strong> ${card.cons}</p>
        </div>
        <div class="details" id="detail-${card.key}" hidden>
          <div class="details-inner"></div>
        </div>
      </div>`;
    }).join('');
  }

  function bindCardInteractions(){
    document.querySelectorAll('.card[data-key]').forEach(card=>{
      if(card.dataset.bound==="true") return;
      card.dataset.bound="true";
      card.addEventListener('click', ()=>{ renderDetails(card); });
      card.addEventListener('keydown', (e)=>{
        if(e.key === 'Enter' || e.key === ' '){
          e.preventDefault(); renderDetails(card);
        }
      });
    });
  }

  
  // â”€â”€ ì¼ì • ì¹´ë“œ ë Œë”ë§ (ì„¸ë¡œ Day ë¦¬ìŠ¤íŠ¸)
  function renderItineraries(){
    const grid = document.getElementById('itinerary-grid');
    if(!grid) return;
    const order = scoreData.map(d => d.region);
    grid.innerHTML = order.map(region => {
      const days = itineraryData[region] || [];
      const meta = cardLookup[region] || {};
      const flag = meta.flag || 'ğŸŒ';
      const subline = meta.total ? `${meta.rank ? meta.rank+' Â· ' : ''}${meta.total}` : 'ì¶”ì²œ ì¼ì •';
      const items = days.map((d, i) => `
        <li class="it-day">
          <div class="day-badge">Day ${i+1}</div>
          <div class="day-text">${d.replace(/^Day\\d\\s*/i,'')}</div>
        </li>
      `).join('');
      return `
        <div class="card itinerary-card">
          <div class="it-title">
            <h3 style="margin:0"><span class="flag">${flag}</span> ${region} ì¼ì •</h3>
          </div>
          <p class="it-sub">${subline}</p>
          <ul class="it-days">${items}</ul>
        </div>`;
    }).join('');
  }
  renderItineraries();


  renderCards();
  bindCardInteractions();

  // â”€â”€ D3 ì°¨íŠ¸ (ë™ì  ë§ˆì§„ & ë¼ë²¨ ì•ˆ/ë°– ë°°ì¹˜, ëª¨ë°”ì¼ ìµœì í™”)
  const chartData = scoreData.map(item => ({p: item.region, s: item.score}));
  let drawn=false;
  let resizeFrame=null;
  let resizeObserver=null;

  const obs=new IntersectionObserver(entries=>{
    if(entries[0].isIntersecting&&!drawn){
      drawn=true;
      draw();
      setupChartResizeWatcher();
      obs.unobserve(chartContainer);
    }
  }, {threshold:.3});
  obs.observe(chartContainer);

  function setupChartResizeWatcher(){
    const schedule=()=>{
      if(!drawn) return;
      if(resizeFrame) cancelAnimationFrame(resizeFrame);
      resizeFrame=requestAnimationFrame(draw);
    };
    if('ResizeObserver' in window){
      resizeObserver = new ResizeObserver(schedule);
      resizeObserver.observe(chartContainer);
    }else{
      window.addEventListener('resize', schedule);
    }
  }

  function isMobilePortrait(){
    return window.innerWidth <= 768 && window.matchMedia('(orientation: portrait)').matches;
  }

  function draw(){
    if(!chartContainer) return;
    chartContainer.innerHTML='';
    const isMobile = isMobilePortrait();
    const w=chartContainer.clientWidth||800;
    const baseH = isMobile ? Math.max(300, chartData.length * (isMobile ? 42 : 48)) : Math.max(230, chartData.length * 48);
    const svg=d3.select(chartContainer).append('svg').attr('width','100%').attr('height',baseH)
      .attr('viewBox',`0 0 ${w} ${baseH}`).style('overflow','visible');

    let m={t:20,r:20,b:30,l:20};
    if(isMobile){
      m={t:12,r:12,b:35,l:12};
    }
    let iw=w-m.l-m.r, ih=baseH-m.t-m.b;
    const g0=svg.append('g').attr('transform',`translate(${m.l},${m.t})`);
    const x0=d3.scaleLinear().domain([0,100]).range([0,iw]);
    const padding = isMobile ? 0.15 : 0.2;
    const y0=d3.scaleBand().domain(chartData.map(d=>d.p)).range([0,ih]).padding(padding);
    const yAxis0=g0.append('g').attr('class','y0 y-axis').call(d3.axisLeft(y0));
    const fontSize = isMobile ? '12px' : '14px';
    yAxis0.selectAll('text').style('font-size',fontSize).style('font-weight',600);
    const xAxis0=g0.append('g').attr('class','x0 x-axis').attr('transform',`translate(0,${ih})`).call(d3.axisBottom(x0).ticks(isMobile ? 4 : 5));
    const maxYLabelW=Math.ceil(Math.max(...yAxis0.selectAll('text').nodes().map(n=>n.getBBox().width),0));
    const xAxisH=Math.ceil(xAxis0.node().getBBox().height);
    const rightPad = isMobile ? 50 : 40;
    m={t:isMobile?12:16,r:rightPad,b:Math.max(isMobile?35:30,xAxisH+10),l:Math.max(isMobile?50:60,maxYLabelW+(isMobile?12:16))};
    iw=w-m.l-m.r; ih=baseH-m.t-m.b;
    g0.remove();

    const g=svg.append('g').attr('transform',`translate(${m.l},${m.t})`);
    const x=d3.scaleLinear().domain([0,100]).range([0,iw]);
    const y=d3.scaleBand().domain(chartData.map(d=>d.p)).range([0,ih]).padding(padding);

    g.append('g').attr('transform',`translate(0,${ih})`).call(d3.axisBottom(x).tickSize(-ih).tickFormat(''))
      .selectAll('line').attr('stroke',isMobile?'#f1f5f9':'#e5e7eb').attr('stroke-width',1)
      .attr('stroke-dasharray',isMobile?'2,2':'none');

    const bars=g.selectAll('.bar').data(chartData).enter().append('rect').attr('class','bar')
      .attr('y',d=>y(d.p)).attr('x',0).attr('height',y.bandwidth()).attr('width',0)
      .attr('fill',d=>d.s>=90?'#10b981':d.s>=80?'#3b82f6':'#6b7280')
      .attr('rx',isMobile?6:8)
      .style('filter','drop-shadow(0 2px 4px rgba(0,0,0,.1))');
    bars.transition().duration(800).delay((_,i)=>i*80).attr('width',d=>x(d.s));

    const yAxis = g.append('g').attr('class','y-axis').call(d3.axisLeft(y));
    yAxis.selectAll('text').style('font-size',fontSize).style('font-weight',600)
      .style('fill',isMobile?'#475569':'var(--t)');
    yAxis.selectAll('line').attr('stroke',isMobile?'transparent':'var(--b)');
    yAxis.selectAll('path').attr('stroke',isMobile?'transparent':'var(--b)');

    const xAxis = g.append('g').attr('class','x-axis').attr('transform',`translate(0,${ih})`).call(d3.axisBottom(x).ticks(isMobile ? 4 : 5));
    xAxis.selectAll('text').style('font-size',isMobile?'11px':'12px').style('fill','var(--m)');
    xAxis.selectAll('line').attr('stroke','var(--b)');
    xAxis.selectAll('path').attr('stroke','var(--b)');

    const labelSize = isMobile ? '13px' : '12px';
    const labels=g.selectAll('.val').data(chartData).enter().append('text').attr('class','val')
      .attr('y',d=>y(d.p)+y.bandwidth()/2).attr('dy','.35em').style('font-weight',700)
      .style('font-size',labelSize).style('opacity',0);

    setTimeout(()=>{
      labels.text(d=>d.s).each(function(d){
        const barW=x(d.s); 
        const minWidth = isMobile ? 35 : 28;
        const inside=barW>minWidth;
        d3.select(this).attr('x', inside? barW-(isMobile?10:8): barW+(isMobile?10:8))
          .attr('text-anchor', inside? 'end':'start')
          .style('fill', inside? '#fff': (d.s>=90?'#10b981':d.s>=80?'#3b82f6':'#6b7280'))
          .style('text-shadow', inside ? '0 1px 2px rgba(0,0,0,.3)' : 'none');
      }).transition().duration(300).style('opacity',1);
    }, 900);

    if(!isMobile){
      const tip=d3.select('body').select('.tooltip').empty() 
        ? d3.select('body').append('div').attr('class','tooltip')
        : d3.select('body').select('.tooltip');
      bars.on('mousemove',(e,o)=>{tip.style('opacity',1).style('left',(e.pageX+15)+'px').style('top',(e.pageY-30)+'px')
        .html(`<strong>${o.p}</strong><br>ìŠ¤ì½”ì–´: <b style="color:#10b981">${o.s}</b>`) })
        .on('mouseout',()=>tip.style('opacity',0));
    }
  }

  // â”€â”€ ìƒì„¸ ì»¨í…ì¸ (ì¹´ë“œ í´ë¦­ ì‹œ ë Œë”)
  function renderDetails(card){
    const key = card.dataset.key;
    const panel = card.querySelector('.details');
    const inner = card.querySelector('.details-inner');
    if(!panel || !inner) return;
    if (!inner.dataset.rendered) {
      const info = detailsData[key] || {};
      inner.innerHTML = Object.entries(info).map(([k,v]) =>
        `<div><b>${k}</b><br><span>${v}</span></div>`
      ).join('');
      inner.dataset.rendered = "true";
    }
    const expanded = card.getAttribute('aria-expanded') === 'true';
    card.setAttribute('aria-expanded', String(!expanded));
    if (!expanded) {
      panel.hidden = false;
      panel.style.maxHeight = panel.scrollHeight + 'px';
      setTimeout(()=> panel.style.maxHeight = panel.scrollHeight + 'px', 10);
    } else {
      panel.style.maxHeight = panel.scrollHeight + 'px';
      requestAnimationFrame(()=> { panel.style.maxHeight = '0px'; });
      panel.addEventListener('transitionend', () => {
        if (card.getAttribute('aria-expanded') === 'false') panel.hidden = true;
      }, { once: true });
    }
  }
</script>
</body>
</html>
